<?php 
//Se carga el XML y se convierte a base 64
$xml_content = base64_encode('<?xml version="1.0" encoding="UTF-8"?>
<cfdi:Comprobante xmlns:cfdi="http://www.sat.gob.mx/cfd/3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="3.2" serie="1A" folio="1" fecha="2013-08-08T15:03:08" sello="nZDthfTxe2yePOqUyd+EQzCZpIWFnz+k8gRsW2yRDhKQEsxlw/8kJ9XDVWRmsc4SMkqz1YfxTfxW8RDTHYT6P/e4f8GtuplaGTyEpN/vri1PAPqGnDbAyk+7Gv1VZqAsP8+5UJhTD1ZLaALnGdTtpppk6sMwZqTtMPgFI8rz54Q=" tipoDeComprobante="ingreso" formaDePago="Pago en Una Sola Exhibicion" metodoDePago="efectivo" LugarExpedicion="matriz" noCertificado="00001000000201889852" certificado="MIIEdDCCA1ygAwIBAgIUMDAwMDEwMDAwMDAyMDE4ODk4NTIwDQYJKoZIhvcNAQEFBQAwggGVMTgwNgYDVQQDDC9BLkMuIGRlbCBTZXJ2aWNpbyBkZSBBZG1pbmlzdHJhY2nDs24gVHJpYnV0YXJpYTEvMC0GA1UECgwmU2VydmljaW8gZGUgQWRtaW5pc3RyYWNpw7NuIFRyaWJ1dGFyaWExODA2BgNVBAsML0FkbWluaXN0cmFjacOzbiBkZSBTZWd1cmlkYWQgZGUgbGEgSW5mb3JtYWNpw7NuMSEwHwYJKoZIhvcNAQkBFhJhc2lzbmV0QHNhdC5nb2IubXgxJjAkBgNVBAkMHUF2LiBIaWRhbGdvIDc3LCBDb2wuIEd1ZXJyZXJvMQ4wDAYDVQQRDAUwNjMwMDELMAkGA1UEBhMCTVgxGTAXBgNVBAgMEERpc3RyaXRvIEZlZGVyYWwxFDASBgNVBAcMC0N1YXVodMOpbW9jMRUwEwYDVQQtEwxTQVQ5NzA3MDFOTjMxPjA8BgkqhkiG9w0BCQIML1Jlc3BvbnNhYmxlOiBDZWNpbGlhIEd1aWxsZXJtaW5hIEdhcmPDrWEgR3VlcnJhMB4XDTEyMDkwNTE1MDQyNloXDTE2MDkwNTE1MDQyNlowgbUxIzAhBgNVBAMTGkRBTklFTCBBTEZPTlNPIExPUEVaIEFOR0VMMSMwIQYDVQQpExpEQU5JRUwgQUxGT05TTyBMT1BFWiBBTkdFTDEjMCEGA1UEChMaREFOSUVMIEFMRk9OU08gTE9QRVogQU5HRUwxFjAUBgNVBC0TDUxPQUQ4NTA1MTFTWDMxGzAZBgNVBAUTEkxPQUQ4NTA1MTFIQ1NQTk4wNjEPMA0GA1UECxMGbWF0cml6MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCQ2peNeLvW2O0DTXeqwLrR+fKIT/Q1wsNMZUSh4Jbaj6lJWnBJxb7iR0hZbRB5ANAW5yQHNd+lEQQJPgNPd7eaRbS+7nCuI7KOYTEWWeFhLpqWEL2pMxOxnvGDdc1qI54SXUDarAq/SXrRtfuYqZw3+fEDt/f0A4xttAfrnF8rwIDAQABox0wGzAMBgNVHRMBAf8EAjAAMAsGA1UdDwQEAwIGwDANBgkqhkiG9w0BAQUFAAOCAQEAoBzuCpmK5Q1/Cvjlv4yL1/7iQHtB5XNyGR+LXQkX2/t/DjazyiAQgQFlIGHysrHCvxGKtpoUn8cFqEHcUydDJBDcsGNyaBGlfVmsRvv0MCCST9mYq1DCslHRo7cuf4C+6sN11TDTGI5J3oD9ev2zTo8SCup71bGbdPO0TH/H/6oQhoJIaw/CaMAuOIS0dFn2sbva/dstVPPHk6jg/nM6Pc5hKe9joGaf0zZfgylyneWU+Djfk5Arf7qBsmo2fNk+RWFGEFkiFQJdQElRMlg3xGmXuOmcbV+PAMJcNwPOqdFJho8fw5fG8j/tBjeB1gzlr8w6N4ckMyD74xvjJ06h1g==" subTotal="12.00" descuento="0.00" TipoCambio="1.00" Moneda="MXN" total="13.92" xsi:schemaLocation="http://www.sat.gob.mx/cfd/3 http://www.sat.gob.mx/sitio_internet/cfd/3/cfdv32.xsd"><cfdi:Emisor rfc="AAQM610917QJA" nombre="DEMO FACTURASE"><cfdi:DomicilioFiscal calle="DEMO" noExterior="13" noInterior="45" colonia="DEMO" localidad="DEMO" referencia="DEMO" municipio="DEMO" estado="DEMO" pais="DEMO" codigoPostal="11111"/><cfdi:RegimenFiscal Regimen="Régimen de las Personas Físicas con Actividades Empresariales y Profesionales"/></cfdi:Emisor><cfdi:Receptor rfc="ACO971119HFA" nombre="ABASTECEDORA DE CORRUGADOS SA DE CV"><cfdi:Domicilio calle="CALLE 6" noExterior="NO 15" colonia="COL RUSTICA XALOSTOC" localidad="ECATEPEC" municipio="ECATEPEC" estado="ESTADO DE MEXICO" pais="MEXICO" codigoPostal="55340"/></cfdi:Receptor><cfdi:Conceptos><cfdi:Concepto cantidad="1.00" unidad="Pieza" noIdentificacion="PR00001" descripcion="Test consulting kkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkgggggggggggggggggggggggggggggggggggggggggjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj" valorUnitario="12.00" importe="12.00"/></cfdi:Conceptos><cfdi:Impuestos totalImpuestosRetenidos="0.00" totalImpuestosTrasladados="1.92"><cfdi:Retenciones><cfdi:Retencion impuesto="IVA" importe="0.00"/><cfdi:Retencion impuesto="ISR" importe="0.00"/></cfdi:Retenciones><cfdi:Traslados><cfdi:Traslado impuesto="IVA" tasa="16.00" importe="1.92"/><cfdi:Traslado impuesto="IEPS" tasa="0.00" importe="0.00"/></cfdi:Traslados></cfdi:Impuestos><cfdi:Complemento/></cfdi:Comprobante>
');
 
 
//Variable que almacena los parámetros de envió los cuales se codifican en formato JSON, en este caso el XML.
$data = json_encode(array('xml' => $xml_content));
 
//Variable que almacena la URL del web services
$service_url = 'http://demo-facturacion.finkok.com/servicios/rest/stamp/';
$curl = curl_init($service_url);
curl_setopt($curl, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);//Se determina el metodo de autenticacion
curl_setopt($curl, CURLOPT_HTTPHEADER, array('Accept: application/json', 'Content-Type: application/json'));// Se define la cabecera
curl_setopt($curl, CURLOPT_USERPWD, "mwleinad@yahoo.com:Strong47--"); // Se indican las credenciales con las cuales se registro en la plataforma de finkok.
curl_setopt($curl, CURLOPT_RETURNTRANSFER, TRUE);//regresa el resultado de la transferencia como string.
curl_setopt($curl, CURLOPT_POSTFIELDS, $data);// Se establecen los datos que se van a enviar mediante HTTP “POST”
 
$curl_response = curl_exec($curl);// Se ejecuta la conenexion al servidor con los paremetros anteriores y esta recive la respuesta.
$response = json_decode($curl_response);//Se decodifica el valor que contiene la variable $curl_response
var_dump($response);// Esta función muestra información estructurada de lo que contiene la variable $re